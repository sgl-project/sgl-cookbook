# GLM-4.6 Model Configurations (Simplified Format)
# This file is compiled to data/models/generated/glm46.yaml

vendor: zai-org

defaults:
  hardware:
    H100: { tp: 8 }
    H200: { tp: 8 }
    B200: { tp: 8 }
  configurations:
    - name: default
      nodes: single
      optimization: balanced
    - name: high-throughput-dp
      nodes: single
      optimization: high-throughput
      dp: 8
      enable_dp_attention: true
    - name: high-throughput-ep
      nodes: single
      optimization: high-throughput
      ep: 8
    - name: speculative-mtp
      nodes: single
      optimization: low-latency
      env_vars:
        SGLANG_ENABLE_SPEC_V2: "1"
      extra_args:
        - --speculative-algorithm
        - EAGLE
        - --speculative-num-steps
        - "3"
        - --speculative-eagle-topk
        - "1"
        - --speculative-num-draft-tokens
        - "4"

families:
  - name: GLM-4.6
    description: GLM-4.6 large language model with hybrid thinking
    llm:
      thinking_capability: hybrid
      tool_parser: glm45
      reasoning_parser: glm45

    models:
      # GLM-4.6 - bf16 not supported on H100 (too large)
      - name: GLM-4.6
        quantization: bf16
        hardware:
          H200: { tp: 8 }
          B200: { tp: 8 }

      - name: GLM-4.6-FP8
        quantization: fp8
